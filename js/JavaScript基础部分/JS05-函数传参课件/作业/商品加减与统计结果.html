<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<script>
window.onload = function () {
	var oUl = document.getElementById('list');
	var aLi = oUl.getElementsByTagName('li');

	var oSpan1 = document.getElementById("span1");
	var oSpan2 = document.getElementById("span2");
	var oSpan3 = document.getElementById("span3");

	// fnCount ( aLi[0] );
	for ( var i=0; i<aLi.length; i++ ) {
		fnCount ( aLi[i] );
	}

	function fnCount ( li ) {
		var aBtn = li.getElementsByTagName ('input');
		var oStrong = li.getElementsByTagName ('strong')[0];
		var oEm = li.getElementsByTagName ('em')[0];
		var oSpan = li.getElementsByTagName ('span')[0];
		var n = Number(oStrong.innerHTML);			// '0'
		var price = parseFloat(oEm.innerHTML);	// 12.5

		aBtn[0].onclick = function () {
				if ( n > 0 ) {
					n--;
				}
				oStrong.innerHTML = n;
				oSpan.innerHTML = n*price + '元';

				total(0);
		};
		
		aBtn[1].onclick = function () {
			n++;
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';

			total(1);
		};
	}

	
	function total(type){
			var totalNum = 0;//共多少件商品
			var totalPrize = 0;//共多少钱
			for(var i=0;i<aLi.length;i++){
					if(type == 1){
						totalNum += parseInt(aLi[i].getElementsByTagName('strong')[0].innerHTML);
						totalPrize += parseFloat(aLi[i].getElementsByTagName('span')[0].innerHTML);
					}else{
						totalNum -= parseInt(aLi[i].getElementsByTagName('strong')[0].innerHTML);
						totalPrize -= parseFloat(aLi[i].getElementsByTagName('span')[0].innerHTML);
					}
			}
			oSpan1.innerHTML = Math.abs(totalNum);
			oSpan2.innerHTML = Math.abs(totalPrize);
	}
};
</script>
</head>

<body>

<ul id="list">
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>12.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>10.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>14.5元</em>
    小计：<span>0元</span>
  </li>
</ul>

<p>
商品合计共：<span id="span1">0</span>件，共花费了：<span id="span2">0</span>元<br />
其中最贵的商品单价是：<span id="span3">0</span>元
</p>

</body>
</html>
